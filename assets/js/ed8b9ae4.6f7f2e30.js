"use strict";(self.webpackChunksgpp_tech_guide=self.webpackChunksgpp_tech_guide||[]).push([[2939],{1911:(e,s,i)=>{i.d(s,{R:()=>r,x:()=>t});var n=i(9729);const o={},a=n.createContext(o);function r(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(a.Provider,{value:s},e.children)}},8662:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"adrs/e-mails-ambientes-n-produtivos","title":"ADR-012 \u2013 Gest\xe3o de e-mails em ambientes n\xe3o-produtivos (MailHog)","description":"- Status: Accepted","source":"@site/docs/adrs/0013-e-mails-ambientes-n-produtivos.md","sourceDirName":"adrs","slug":"/adrs/e-mails-ambientes-n-produtivos","permalink":"/sgpp-tech-guide/docs/adrs/e-mails-ambientes-n-produtivos","draft":false,"unlisted":false,"editUrl":"https://github.com/ppsa-sgpp/sgpp-tech-guide/edit/main/docs/adrs/0013-e-mails-ambientes-n-produtivos.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ADR-011 \u2013 Integra\xe7\xe3o BAW \u2194 ODM (contratos e objetos de neg\xf3cio)","permalink":"/sgpp-tech-guide/docs/adrs/integracao-baw-odm"},"next":{"title":"ADR-013 \u2013 Consolida\xe7\xe3o da l\xf3gica de neg\xf3cio no sgpp-services","permalink":"/sgpp-tech-guide/docs/adrs/consolidacao-sgpp-services"}}');var o=i(5813),a=i(1911);const r={},t="ADR-012 \u2013 Gest\xe3o de e-mails em ambientes n\xe3o-produtivos (MailHog)",d={},l=[{value:"Contexto",id:"contexto",level:2},{value:"Decis\xe3o",id:"decis\xe3o",level:2},{value:"Consequ\xeancias",id:"consequ\xeancias",level:2},{value:"Rela\xe7\xf5es",id:"rela\xe7\xf5es",level:2}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"adr-012--gest\xe3o-de-e-mails-em-ambientes-n\xe3o-produtivos-mailhog",children:"ADR-012 \u2013 Gest\xe3o de e-mails em ambientes n\xe3o-produtivos (MailHog)"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Data:"})," 2019-09-12"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"contexto",children:"Contexto"}),"\n",(0,o.jsxs)(s.p,{children:["O SGPP precisa testar fluxos de neg\xf3cio que enviam e-mails (notifica\xe7\xf5es, alertas, confirma\xe7\xf5es).",(0,o.jsx)(s.br,{}),"\n","Em ambientes ",(0,o.jsx)(s.strong,{children:"n\xe3o-produtivos (dev, test, uat)"}),", n\xe3o \xe9 aceit\xe1vel que mensagens saiam para destinat\xe1rios reais.",(0,o.jsx)(s.br,{}),"\n","\xc9 necess\xe1rio um mecanismo que capture os e-mails enviados pelas aplica\xe7\xf5es, permitindo inspe\xe7\xe3o pelos desenvolvedores e testadores sem risco de vazamento."]}),"\n",(0,o.jsxs)(s.p,{children:["O componente escolhido \xe9 o ",(0,o.jsx)(s.strong,{children:"MailHog"}),", uma ferramenta que simula um servidor SMTP e exp\xf5e uma interface web para visualizar os e-mails capturados."]}),"\n",(0,o.jsx)(s.h2,{id:"decis\xe3o",children:"Decis\xe3o"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Implantar o ",(0,o.jsx)(s.strong,{children:"MailHog"})," em ambientes de desenvolvimento, teste e homologa\xe7\xe3o."]}),"\n",(0,o.jsxs)(s.li,{children:["Configurar, via vari\xe1veis de ambiente, servi\xe7os (",(0,o.jsx)(s.code,{children:"sgpp-services"}),", BAW, ODM) para enviar e-mails para o MailHog em vez de um servidor SMTP real."]}),"\n",(0,o.jsx)(s.li,{children:"Capturar e visualizar as mensagens via interface web do MailHog, permitindo auditoria e verifica\xe7\xe3o em testes."}),"\n",(0,o.jsxs)(s.li,{children:["Em ",(0,o.jsx)(s.strong,{children:"produ\xe7\xe3o"}),", utilizar o SMTP da PPSA, isolado do MailHog."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"consequ\xeancias",children:"Consequ\xeancias"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Positivas"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Garante que e-mails de ambientes n\xe3o-produtivos ",(0,o.jsx)(s.strong,{children:"n\xe3o chegam a destinat\xe1rios reais"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Facilita a valida\xe7\xe3o de conte\xfado e formata\xe7\xe3o de mensagens durante testes."}),"\n",(0,o.jsx)(s.li,{children:"Ferramenta leve e de f\xe1cil integra\xe7\xe3o com aplica\xe7\xf5es existentes."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Negativas"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O MailHog roda em ",(0,o.jsx)(s.strong,{children:"Kubernetes no IBM Cloud"}),", onde a porta ",(0,o.jsx)(s.strong,{children:"25/TCP n\xe3o pode ser exposta"})," por restri\xe7\xe3o da plataforma."]}),"\n",(0,o.jsxs)(s.li,{children:["N\xe3o \xe9 poss\xedvel contornar essa limita\xe7\xe3o nem expondo como ",(0,o.jsx)(s.strong,{children:"DaemonSet"}),", pois o IBM Cloud bloqueia sa\xedda SMTP direta na porta 25."]}),"\n",(0,o.jsx)(s.li,{children:"\xc9 necess\xe1rio utilizar portas alternativas (ex.: 1025 para SMTP interno do MailHog) e ajustar a configura\xe7\xe3o das aplica\xe7\xf5es para esse endpoint."}),"\n",(0,o.jsx)(s.li,{children:"O MailHog n\xe3o reflete 100% do comportamento de provedores SMTP reais, podendo haver diferen\xe7as sutis na entrega/valida\xe7\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"rela\xe7\xf5es",children:"Rela\xe7\xf5es"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"ADR-009 \u2013 Runtime em IBM Cloud Kubernetes Service"}),": MailHog \xe9 implantado como servi\xe7o em Kubernetes."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"ADR-010 \u2013 API Gateway e Service Registry"}),": servi\xe7os que enviam e-mails precisam de configura\xe7\xe3o para redirecionar sa\xeddas para o MailHog."]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);