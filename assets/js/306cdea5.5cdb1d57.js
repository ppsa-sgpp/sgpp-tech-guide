"use strict";(self.webpackChunksgpp_tech_guide=self.webpackChunksgpp_tech_guide||[]).push([[5235],{1911:(e,s,i)=>{i.d(s,{R:()=>d,x:()=>o});var n=i(9729);const a={},r=n.createContext(a);function d(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),n.createElement(r.Provider,{value:s},e.children)}},4413:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>d,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"adr/ciclo-vida-ccos","title":"ADR-018 \u2013 Ciclo de Vida da CCO (auditoria, versionamento e reexecu\xe7\xe3o)","description":"- Status: Accepted","source":"@site/docs/adr/0019-ciclo-vida-ccos.md","sourceDirName":"adr","slug":"/adr/ciclo-vida-ccos","permalink":"/sgpp-tech-guide/docs/adr/ciclo-vida-ccos","draft":false,"unlisted":false,"editUrl":"https://github.com/ppsa-sgpp/sgpp-tech-guide/edit/main/docs/adr/0019-ciclo-vida-ccos.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ADR-017 \u2013 Data Mart em DB2 e processos ETL (db2-etl)","permalink":"/sgpp-tech-guide/docs/adr/data-mart-etl"},"next":{"title":"ADR-019 \u2013 Observabilidade de logs de microsservi\xe7os com Grafana","permalink":"/sgpp-tech-guide/docs/adr/observabilidade"}}');var a=i(5813),r=i(1911);const d={},o="ADR-018 \u2013 Ciclo de Vida da CCO (auditoria, versionamento e reexecu\xe7\xe3o)",c={},t=[{value:"Contexto",id:"contexto",level:2},{value:"Decis\xe3o",id:"decis\xe3o",level:2},{value:"Consequ\xeancias",id:"consequ\xeancias",level:2},{value:"Rela\xe7\xf5es",id:"rela\xe7\xf5es",level:2}];function l(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"adr-018--ciclo-de-vida-da-cco-auditoria-versionamento-e-reexecu\xe7\xe3o",children:"ADR-018 \u2013 Ciclo de Vida da CCO (auditoria, versionamento e reexecu\xe7\xe3o)"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Data:"})," 2023-09-02"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"contexto",children:"Contexto"}),"\n",(0,a.jsxs)(s.p,{children:["A ",(0,a.jsx)(s.strong,{children:"Conta de Custo em \xd3leo (CCO)"})," \xe9 o dado mais importante do SGPP e precisa atender requisitos de ",(0,a.jsx)(s.strong,{children:"auditoria, versionamento e corre\xe7\xe3o controlada"}),".",(0,a.jsx)(s.br,{}),"\n","Para isso, \xe9 definido um ",(0,a.jsx)(s.strong,{children:"ciclo de vida de etapas"}),", onde cada transi\xe7\xe3o de estado da CCO \xe9 registrada de forma expl\xedcita.",(0,a.jsx)(s.br,{}),"\n","Esse modelo deve permitir:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Persistir o ",(0,a.jsx)(s.strong,{children:"estado da aplica\xe7\xe3o antes e depois"})," de cada etapa."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Versionar o c\xf3digo"})," que implementa cada etapa."]}),"\n",(0,a.jsxs)(s.li,{children:["Possibilitar ",(0,a.jsx)(s.strong,{children:"reexecu\xe7\xf5es ad-hoc"}),", inclusive com ",(0,a.jsx)(s.strong,{children:"encadeamento de m\xfaltiplas etapas"}),"."]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"decis\xe3o",children:"Decis\xe3o"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Criar uma arquitetura de ",(0,a.jsx)(s.strong,{children:"etapas versionadas"})," que comp\xf5em o ciclo de vida da CCO."]}),"\n",(0,a.jsxs)(s.li,{children:["Cada etapa:","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Persiste os ",(0,a.jsx)(s.strong,{children:"dados de entrada e sa\xedda"})," da execu\xe7\xe3o."]}),"\n",(0,a.jsxs)(s.li,{children:["\xc9 implementada em classes Java versionadas, com conven\xe7\xf5es de pacote (",(0,a.jsx)(s.code,{children:"vX_Y_Z"}),")."]}),"\n",(0,a.jsx)(s.li,{children:"Mant\xe9m v\xednculo com a etapa anterior, garantindo rastreabilidade de altera\xe7\xf5es."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["O ",(0,a.jsx)(s.strong,{children:"ciclo de vida"})," \xe9 capaz de:","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Registrar execu\xe7\xf5es e falhas."}),"\n",(0,a.jsxs)(s.li,{children:["Permitir ",(0,a.jsx)(s.strong,{children:"reexecu\xe7\xe3o de etapas isoladas"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Permitir ",(0,a.jsx)(s.strong,{children:"reexecu\xe7\xe3o encadeada"})," de m\xfaltiplas etapas, reproduzindo o hist\xf3rico completo da CCO."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"consequ\xeancias",children:"Consequ\xeancias"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Positivas"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Atende requisitos de ",(0,a.jsx)(s.strong,{children:"auditoria regulat\xf3ria"}),", com rastreabilidade completa do hist\xf3rico da CCO."]}),"\n",(0,a.jsxs)(s.li,{children:["Permite ",(0,a.jsx)(s.strong,{children:"corrigir dados"})," sem manipula\xe7\xe3o direta do banco, atrav\xe9s de reexecu\xe7\xf5es controladas."]}),"\n",(0,a.jsx)(s.li,{children:"Garante que cada vers\xe3o de etapa reflita fielmente a regra de neg\xf3cio vigente no per\xedodo."}),"\n",(0,a.jsxs)(s.li,{children:["Oferece ",(0,a.jsx)(s.strong,{children:"transpar\xeancia"}),": o estado anterior e posterior de cada execu\xe7\xe3o fica registrado."]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Negativas"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Gera ",(0,a.jsx)(s.strong,{children:"alto volume de dados"})," de hist\xf3rico, aumentando custos de armazenamento e exigindo governan\xe7a para reten\xe7\xe3o."]}),"\n",(0,a.jsxs)(s.li,{children:["Introduz ",(0,a.jsx)(s.strong,{children:"complexidade no c\xf3digo"}),", pois a cada nova vers\xe3o de etapa \xe9 necess\xe1rio duplicar a classe principal e suas auxiliares."]}),"\n",(0,a.jsx)(s.li,{children:"A manuten\xe7\xe3o da estrutura de versionamento exige disciplina e pode gerar sobrecarga de desenvolvimento."}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"rela\xe7\xf5es",children:"Rela\xe7\xf5es"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ADR-001 \u2013 Event Sourcing + CQRS"}),": a filosofia de registrar todas as mudan\xe7as influencia o design do ciclo de vida."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ADR-006 \u2013 Separa\xe7\xe3o dos modelos de dados"}),": proje\xe7\xf5es de leitura podem consumir os estados consolidados da CCO."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:["ADR-014 \u2013 Consolida\xe7\xe3o no ",(0,a.jsx)(s.code,{children:"sgpp-services"})]}),": o ciclo de vida \xe9 implementado no ",(0,a.jsx)(s.code,{children:"sgpp-services"}),", que embarca o Event Store."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);