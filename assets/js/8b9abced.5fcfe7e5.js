"use strict";(self.webpackChunksgpp_tech_guide=self.webpackChunksgpp_tech_guide||[]).push([[5957],{1911:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>d});var i=n(9729);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}},7190:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"adrs/kubernetes","title":"ADR-008 \u2013 Runtime de containers no IBM Cloud Kubernetes Service","description":"- Status: Accepted","source":"@site/docs/adrs/0009-kubernetes.md","sourceDirName":"adrs","slug":"/adrs/kubernetes","permalink":"/sgpp-tech-guide/docs/adrs/kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/ppsa-sgpp/sgpp-tech-guide/edit/main/docs/adrs/0009-kubernetes.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ADR-007 \u2013 Banco de dados principal: MongoDB","permalink":"/sgpp-tech-guide/docs/adrs/storage"},"next":{"title":"ADR-009 \u2013 Gateway de APIs e Service Registry (JHipster)","permalink":"/sgpp-tech-guide/docs/adrs/gateway-api-service-registry"}}');var r=n(5813),o=n(1911);const t={},d="ADR-008 \u2013 Runtime de containers no IBM Cloud Kubernetes Service",a={},c=[{value:"Contexto",id:"contexto",level:2},{value:"Decis\xe3o",id:"decis\xe3o",level:2},{value:"Consequ\xeancias",id:"consequ\xeancias",level:2},{value:"Rela\xe7\xf5es",id:"rela\xe7\xf5es",level:2}];function l(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"adr-008--runtime-de-containers-no-ibm-cloud-kubernetes-service",children:"ADR-008 \u2013 Runtime de containers no IBM Cloud Kubernetes Service"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Data:"})," 2019-09-08"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"contexto",children:"Contexto"}),"\n",(0,r.jsxs)(s.p,{children:["Os servi\xe7os do SGPP precisam de um ambiente de execu\xe7\xe3o escal\xe1vel, resiliente e integrado ao ecossistema IBM j\xe1 adotado pela PPSA.",(0,r.jsx)(s.br,{}),"\n","O ",(0,r.jsx)(s.strong,{children:"IBM Cloud Kubernetes Service (IKS)"})," \xe9 a op\xe7\xe3o natural, pois a solu\xe7\xe3o j\xe1 utiliza BAW e ODM na nuvem IBM.",(0,r.jsx)(s.br,{}),"\n","A decis\xe3o inclui o alinhamento entre ambientes de aplica\xe7\xe3o e de processos: ",(0,r.jsx)(s.strong,{children:"dev, test, uat e prd"}),", refletindo os ambientes existentes no IBM BAW."]}),"\n",(0,r.jsx)(s.p,{children:"Al\xe9m do runtime, \xe9 necess\xe1rio definir:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Registro de imagens"})," confi\xe1vel para build e distribui\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Esteira de publica\xe7\xe3o"})," cont\xednua para garantir consist\xeancia e repetibilidade de deploys."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"decis\xe3o",children:"Decis\xe3o"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Adotar o ",(0,r.jsx)(s.strong,{children:"IBM Cloud Kubernetes Service"})," como runtime oficial dos servi\xe7os do SGPP."]}),"\n",(0,r.jsxs)(s.li,{children:["Criar e manter quatro ambientes distintos no IKS: ",(0,r.jsx)(s.strong,{children:"dev, test, uat e prd"}),", em paralelo aos ambientes do IBM BAW."]}),"\n",(0,r.jsxs)(s.li,{children:["Empacotar os servi\xe7os (",(0,r.jsx)(s.code,{children:"sgpp-services"}),", Event Store, Document Service, etc.) como ",(0,r.jsx)(s.strong,{children:"imagens Docker"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Publicar essas imagens em um ",(0,r.jsx)(s.strong,{children:"IBM Cloud Container Registry"})," dedicado ao projeto."]}),"\n",(0,r.jsxs)(s.li,{children:["Estabelecer uma ",(0,r.jsx)(s.strong,{children:"pipeline de CI/CD"})," no IBM Cloud que:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Faz build de imagens a partir do c\xf3digo fonte."}),"\n",(0,r.jsx)(s.li,{children:"Publica as imagens no registry."}),"\n",(0,r.jsx)(s.li,{children:"Automatiza a implanta\xe7\xe3o nos clusters Kubernetes correspondentes (dev \u2192 test \u2192 uat \u2192 prd)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"consequ\xeancias",children:"Consequ\xeancias"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Positivas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Alinhamento entre ambientes de ",(0,r.jsx)(s.strong,{children:"processos (BAW)"})," e de ",(0,r.jsx)(s.strong,{children:"servi\xe7os de neg\xf3cio"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Escalabilidade e resili\xeancia fornecidas pelo Kubernetes."}),"\n",(0,r.jsx)(s.li,{children:"Consist\xeancia na publica\xe7\xe3o por meio de uma pipeline integrada."}),"\n",(0,r.jsxs)(s.li,{children:["Uso de um ",(0,r.jsx)(s.strong,{children:"registro de imagens corporativo"}),", seguro e integrado \xe0 plataforma IBM."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Negativas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Depend\xeancia do IBM Cloud"})," para runtime, registro e pipelines."]}),"\n",(0,r.jsxs)(s.li,{children:["Maior ",(0,r.jsx)(s.strong,{children:"complexidade operacional"})," em compara\xe7\xe3o a execu\xe7\xf5es simples em VMs ou servidores bare-metal."]}),"\n",(0,r.jsx)(s.li,{children:"Curva de aprendizado para a equipe na opera\xe7\xe3o de Kubernetes e pipelines."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"rela\xe7\xf5es",children:"Rela\xe7\xf5es"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ADR-002 \u2013 Orquestra\xe7\xe3o no BAW"}),": a estrat\xe9gia de ambientes espelha a divis\xe3o do BAW (dev/test/uat/prd)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["ADR-014 \u2013 Consolida\xe7\xe3o no ",(0,r.jsx)(s.code,{children:"sgpp-services"})]}),": servi\xe7os principais s\xe3o empacotados e executados no IKS."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ADR-008 \u2013 Banco de dados principal: MongoDB"}),": persist\xeancia \xe9 consumida pelos servi\xe7os em containers."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ADR-019 \u2013 C4 + Structurizr"}),": diagramas de deployment refletem os ambientes Kubernetes no IBM Cloud."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);