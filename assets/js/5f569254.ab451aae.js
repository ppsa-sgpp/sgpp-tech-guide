"use strict";(self.webpackChunksgpp_tech_guide=self.webpackChunksgpp_tech_guide||[]).push([[2229],{1911:(e,s,o)=>{o.d(s,{R:()=>a,x:()=>t});var n=o(9729);const r={},i=n.createContext(r);function a(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:s},e.children)}},9021:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"adr/repositorio-documentos","title":"ADR-016 \u2013 Integra\xe7\xe3o com IBM Cloud Object Store para documentos","description":"- Status: Accepted","source":"@site/docs/adr/0017-repositorio-documentos.md","sourceDirName":"adr","slug":"/adr/repositorio-documentos","permalink":"/sgpp-tech-guide/docs/adr/repositorio-documentos","draft":false,"unlisted":false,"editUrl":"https://github.com/ppsa-sgpp/sgpp-tech-guide/edit/main/docs/adr/0017-repositorio-documentos.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ADR-015 \u2013 Integra\xe7\xe3o BAW \u2194 ODM centralizada via sgpp-services","permalink":"/sgpp-tech-guide/docs/adr/integracao-baw-services-odm"},"next":{"title":"ADR-017 \u2013 Data Mart em DB2 e processos ETL (db2-etl)","permalink":"/sgpp-tech-guide/docs/adr/data-mart-etl"}}');var r=o(5813),i=o(1911);const a={},t="ADR-016 \u2013 Integra\xe7\xe3o com IBM Cloud Object Store para documentos",d={},c=[{value:"Contexto",id:"contexto",level:2},{value:"Decis\xe3o",id:"decis\xe3o",level:2},{value:"Consequ\xeancias",id:"consequ\xeancias",level:2},{value:"Rela\xe7\xf5es",id:"rela\xe7\xf5es",level:2}];function l(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"adr-016--integra\xe7\xe3o-com-ibm-cloud-object-store-para-documentos",children:"ADR-016 \u2013 Integra\xe7\xe3o com IBM Cloud Object Store para documentos"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Data:"})," 2020-09-02"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"contexto",children:"Contexto"}),"\n",(0,r.jsxs)(s.p,{children:["Originalmente, os documentos do SGPP s\xe3o armazenados no ",(0,r.jsx)(s.strong,{children:"ECM embutido no IBM BAW"}),".",(0,r.jsx)(s.br,{}),"\n","Embora funcional, essa solu\xe7\xe3o apresenta limita\xe7\xf5es importantes:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Dificuldade de acesso externo, o que prejudica integra\xe7\xf5es com outros servi\xe7os."}),"\n",(0,r.jsxs)(s.li,{children:["Restri\xe7\xf5es para ",(0,r.jsx)(s.strong,{children:"backup"})," e ",(0,r.jsx)(s.strong,{children:"versionamento"})," de documentos."]}),"\n",(0,r.jsx)(s.li,{children:"Forte acoplamento ao BAW, reduzindo a flexibilidade da arquitetura."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Para superar essas restri\xe7\xf5es, o time opta por adotar o ",(0,r.jsx)(s.strong,{children:"IBM Cloud Object Store (COS)"})," como reposit\xf3rio oficial de documentos."]}),"\n",(0,r.jsx)(s.h2,{id:"decis\xe3o",children:"Decis\xe3o"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Substituir o armazenamento nativo do BAW (ECM) pelo ",(0,r.jsx)(s.strong,{children:"IBM Cloud Object Store"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Criar um ",(0,r.jsxs)(s.strong,{children:["microservi\xe7o dedicado (",(0,r.jsx)(s.code,{children:"cos-integration"}),")"]}),", que exp\xf5e uma API REST para:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Receber documentos do BAW."}),"\n",(0,r.jsx)(s.li,{children:"Persistir no Object Store com metadados adequados."}),"\n",(0,r.jsx)(s.li,{children:"Permitir leitura e recupera\xe7\xe3o controlada por outros servi\xe7os."}),"\n",(0,r.jsx)(s.li,{children:"Criar buckets an\xe1logos aos ambientes (dev, uat, prd)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Garantir que o BAW interaja apenas com o ",(0,r.jsx)(s.code,{children:"cos-integration"}),", evitando integra\xe7\xe3o direta com o COS."]}),"\n",(0,r.jsx)(s.li,{children:"Adotar conven\xe7\xf5es de versionamento de documentos e pol\xedticas de backup alinhadas com o COS."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"consequ\xeancias",children:"Consequ\xeancias"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Positivas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Acessibilidade ampliada"}),": qualquer servi\xe7o pode consumir documentos via API REST."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Backup e versionamento simplificados"}),", aproveitando recursos nativos do COS."]}),"\n",(0,r.jsxs)(s.li,{children:["Redu\xe7\xe3o do ",(0,r.jsx)(s.strong,{children:"acoplamento ao BAW"}),", com uma camada de servi\xe7o dedicada."]}),"\n",(0,r.jsx)(s.li,{children:"Maior alinhamento com pr\xe1ticas modernas de armazenamento em nuvem."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Negativas"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Introdu\xe7\xe3o de um ",(0,r.jsxs)(s.strong,{children:["novo microservi\xe7o (",(0,r.jsx)(s.code,{children:"cos-integration"}),")"]})," que precisa ser mantido."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Lat\xeancia adicional"})," nas opera\xe7\xf5es de leitura/escrita, pois todo acesso passa pelo microservi\xe7o."]}),"\n",(0,r.jsxs)(s.li,{children:["Necessidade de gerenciar ",(0,r.jsx)(s.strong,{children:"seguran\xe7a e permiss\xf5es"})," no COS de forma consistente entre aplica\xe7\xf5es."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"rela\xe7\xf5es",children:"Rela\xe7\xf5es"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ADR-002 \u2013 Orquestra\xe7\xe3o no BAW"}),": o BAW deixa de gravar documentos no ECM e passa a usar o ",(0,r.jsx)(s.code,{children:"cos-integration"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["ADR-014 \u2013 Consolida\xe7\xe3o no ",(0,r.jsx)(s.code,{children:"sgpp-services"})]}),": integra\xe7\xf5es e l\xf3gica de neg\xf3cio se consolidam fora do BAW; o COS segue essa tend\xeancia."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ADR-017 \u2013 Observabilidade"}),": logs e m\xe9tricas do ",(0,r.jsx)(s.code,{children:"cos-integration"})," passam a fazer parte do monitoramento da plataforma."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);