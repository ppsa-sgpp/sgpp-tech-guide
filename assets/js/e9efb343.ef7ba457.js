"use strict";(self.webpackChunksgpp_tech_guide=self.webpackChunksgpp_tech_guide||[]).push([[4774],{1911:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>d});var o=n(9729);const i={},a=o.createContext(i);function r(e){const s=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:s},e.children)}},5269:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"adrs/storage","title":"ADR-007 \u2013 Banco de dados principal: MongoDB","description":"- Status: Accepted","source":"@site/docs/adrs/0008-storage.md","sourceDirName":"adrs","slug":"/adrs/storage","permalink":"/sgpp-tech-guide/docs/adrs/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/ppsa-sgpp/sgpp-tech-guide/edit/main/docs/adrs/0008-storage.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ADR-006 \u2013 Mensageria e publica\xe7\xe3o de eventos (Kafka / pub-sub)","permalink":"/sgpp-tech-guide/docs/adrs/mensageria"},"next":{"title":"ADR-008 \u2013 Runtime de containers no IBM Cloud Kubernetes Service","permalink":"/sgpp-tech-guide/docs/adrs/kubernetes"}}');var i=n(5813),a=n(1911);const r={},d="ADR-007 \u2013 Banco de dados principal: MongoDB",t={},c=[{value:"Contexto",id:"contexto",level:2},{value:"Decis\xe3o",id:"decis\xe3o",level:2},{value:"Consequ\xeancias",id:"consequ\xeancias",level:2},{value:"Rela\xe7\xf5es",id:"rela\xe7\xf5es",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"adr-007--banco-de-dados-principal-mongodb",children:"ADR-007 \u2013 Banco de dados principal: MongoDB"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Status:"})," Accepted"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Data:"})," 2019-09-07"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"contexto",children:"Contexto"}),"\n",(0,i.jsxs)(s.p,{children:["O SGPP prioriza simplificar o desenvolvimento e acelerar entregas. O time decide utilizar um banco de dados que permita iniciar sem a defini\xe7\xe3o completa do modelo relacional. O ",(0,i.jsx)(s.strong,{children:"MongoDB"})," oferece armazenamento orientado a documentos, flexibilidade de schema e integra\xe7\xe3o madura com Java e o ecossistema atual."]}),"\n",(0,i.jsx)(s.h2,{id:"decis\xe3o",children:"Decis\xe3o"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Adotar ",(0,i.jsx)(s.strong,{children:"MongoDB"})," como base de dados principal para persist\xeancia operacional."]}),"\n",(0,i.jsxs)(s.li,{children:["Permitir ",(0,i.jsx)(s.strong,{children:"evolu\xe7\xe3o de schema"})," ao longo do tempo, com acordos m\xednimos de contrato entre servi\xe7os."]}),"\n",(0,i.jsx)(s.li,{children:"Postergar decis\xf5es estruturais detalhadas de modelo para fases posteriores, quando houver mais conhecimento sobre os dom\xednios."}),"\n",(0,i.jsxs)(s.li,{children:["Definir salvaguardas m\xednimas desde o in\xedcio","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"cole\xe7\xf5es nomeadas por dom\xednio e agregado"}),"\n",(0,i.jsx)(s.li,{children:"chaves naturais ou t\xe9cnicas est\xe1veis por agregado"}),"\n",(0,i.jsx)(s.li,{children:"versionamento de documentos"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"consequ\xeancias",children:"Consequ\xeancias"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Positivas"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Redu\xe7\xe3o de tempo de modelagem inicial e maior velocidade de itera\xe7\xe3o."}),"\n",(0,i.jsx)(s.li,{children:"Ader\xeancia a dados semiestruturados e varia\xe7\xf5es de payload por dom\xednio."}),"\n",(0,i.jsx)(s.li,{children:"Integra\xe7\xe3o direta com Spring Data e pipelines existentes."}),"\n",(0,i.jsxs)(s.li,{children:["Facilidade para materializar ",(0,i.jsx)(s.strong,{children:"proje\xe7\xf5es de leitura"})," do CQRS."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Negativas"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Risco de ",(0,i.jsx)(s.strong,{children:"deriva de schema"})," se n\xe3o houver governan\xe7a expl\xedcita."]}),"\n",(0,i.jsx)(s.li,{children:"Consultas anal\xedticas complexas ficam menos naturais que em modelo relacional."}),"\n",(0,i.jsxs)(s.li,{children:["Necessidade de ",(0,i.jsx)(s.strong,{children:"boas pr\xe1ticas de indexa\xe7\xe3o"})," e observabilidade para evitar degrada\xe7\xe3o de desempenho."]}),"\n",(0,i.jsxs)(s.li,{children:["Opera\xe7\xf5es que exigem ",(0,i.jsx)(s.strong,{children:"consist\xeancia transacional"})," ampla podem demandar desenho cuidadoso do agregado."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"rela\xe7\xf5es",children:"Rela\xe7\xf5es"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"ADR-001 \u2013 Event Sourcing + CQRS"}),": o MongoDB hospeda as ",(0,i.jsx)(s.strong,{children:"proje\xe7\xf5es de leitura"})," e log de eventos."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"ADR-006 \u2013 Separa\xe7\xe3o dos modelos de dados"}),": o MongoDB concentra o modelo de leitura materializado."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsxs)(s.strong,{children:["ADR-014 \u2013 Consolida\xe7\xe3o no ",(0,i.jsx)(s.code,{children:"sgpp-services"})]}),": o servi\xe7o orquestra grava\xe7\xf5es e consultas, incluindo persist\xeancia no MongoDB."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);